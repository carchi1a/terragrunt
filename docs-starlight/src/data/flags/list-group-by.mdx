---
name: group-by
description: |
  Controls how dependencies are grouped in the output. Supported values (fs, dag). Default: fs.
type: string
env:
  - TG_GROUP_BY
---

import { Aside } from '@astrojs/starlight/components';

Controls how dependencies are represented in the output:

- `fs` (default): Shows dependencies as nested lists with entries as children of parent directories. Best for understanding your infrastructure's physical organization and directory structure.
- `dag`: Shows dependencies in a tree structure from a Directed Acyclic Graph (DAG) perspective. Ideal for understanding deployment order, dependencies, and the logical flow of your infrastructure.

This flag can be combined with other flags to provide different views of your infrastructure:
- Use with `--dependencies` to show dependency relationships
- Use with different `--format` options (text, long, tree, json) for various output styles
- Combine with `--sort=dag` for complete dependency-based organization (shorthand: `--dag`)

Examples:

```bash
# Tree format with filesystem grouping
$ terragrunt list --group-by=fs -T
.
╰── live
    ├── dev
    │   ├── db
    │   ├── ec2
    │   ╰── vpc
    ╰── prod
        ├── db
        ├── ec2
        ╰── vpc
```

```bash
# Tree format with DAG grouping
$ terragrunt list --group-by=dag -T
.
├── live/dev/vpc
│   ├── live/dev/db
│   │   ╰── live/dev/ec2
│   ╰── live/dev/ec2
╰── live/prod/vpc
    ├── live/prod/db
    │   ╰── live/prod/ec2
    ╰── live/prod/ec2
```

```bash
# JSON format with filesystem grouping
$ terragrunt list --group-by=fs -j
[
  {
    "path": "live",
    "children": [
      {
        "path": "dev",
        "children": [
          {
            "path": "live/dev/db",
            "type": "unit"
          },
          {
            "path": "live/dev/ec2",
            "type": "unit"
          },
          {
            "path": "live/dev/vpc",
            "type": "unit"
          }
        ]
      },
      {
        "path": "prod",
        "children": [
          {
            "path": "live/prod/db",
            "type": "unit"
          },
          {
            "path": "live/prod/ec2",
            "type": "unit"
          },
          {
            "path": "live/prod/vpc",
            "type": "unit"
          }
        ]
      }
    ]
  }
]
```

```bash
# JSON format with DAG grouping
$ terragrunt list --group-by=dag -j
[
  {
    "path": "live/dev/db",
    "type": "unit"
  },
  {
    "path": "live/dev/ec2",
    "type": "unit"
  },
  {
    "path": "live/dev/vpc",
    "type": "unit"
  },
  {
    "path": "live/prod/db",
    "type": "unit"
  },
  {
    "path": "live/prod/ec2",
    "type": "unit"
  },
  {
    "path": "live/prod/vpc",
    "type": "unit"
  }
]
```

It's usually a lot more useful to combine the `--group-by=dag` flag with the `--sort=dag` flag and the `--dependencies` flag to get a sense of the deployment order of your infrastructure and the reason for that order.

```bash
$ terragrunt list --group-by=dag --sort=dag --dependencies
[
  {
    "path": "live/dev/vpc",
    "type": "unit"
  },
  {
    "path": "live/prod/vpc",
    "type": "unit"
  },
  {
    "path": "live/dev/db",
    "type": "unit",
    "dependencies": [
      {
        "path": "live/dev/vpc",
        "type": "unit"
      }
    ]
  },
  {
    "path": "live/prod/db",
    "type": "unit",
    "dependencies": [
      {
        "path": "live/prod/vpc",
        "type": "unit"
      }
    ]
  },
  {
    "path": "live/dev/ec2",
    "type": "unit",
    "dependencies": [
      {
        "path": "live/dev/db",
        "type": "unit",
        "dependencies": [
          {
            "path": "live/dev/vpc",
            "type": "unit"
          }
        ]
      },
      {
        "path": "live/dev/vpc",
        "type": "unit"
      }
    ]
  },
  {
    "path": "live/prod/ec2",
    "type": "unit",
    "dependencies": [
      {
        "path": "live/prod/db",
        "type": "unit",
        "dependencies": [
          {
            "path": "live/prod/vpc",
            "type": "unit"
          }
        ]
      },
      {
        "path": "live/prod/vpc",
        "type": "unit"
      }
    ]
  }
]
```

<Aside type="tip">
  The `--dag` flag is a shorthand that sets both `--sort=dag` and `--group-by=dag`.

  This is particularly useful when you want to understand the complete deployment sequence of your infrastructure.
</Aside>
